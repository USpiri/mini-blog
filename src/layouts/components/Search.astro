<label class="block mb-2 text-sm font-medium text-neutral-500">Search</label>
<div id="searchDev"></div>

<script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
<script>
  document.addEventListener("astro:page-load", () => {
    const onIdle = window.requestIdleCallback || ((cb) => setTimeout(cb, 1));
    onIdle(async () => {
      // @ts-ignore
      const { PagefindUI } = await import("@pagefind/default-ui");
      new PagefindUI({
        element: "#searchDev",
        baseUrl: import.meta.env.BASE_URL,
        bundlePath: import.meta.env.BASE_URL.replace(/\/$/, "") + "/pagefind/",
        showImages: false,
        showSubResults: false,
        resetStyles: true,
      });
    });
  });
</script>

<style is:global lang="scss">
  .pagefind-ui__search-input {
    @apply w-full bg-transparent border-2 border-neutral-400 dark:border-neutral-500 text-sm rounded-lg block p-2.5 placeholder-neutral-500 font-semibold;
  }
  .pagefind-ui__search-clear {
    @apply hidden;
  }
  .pagefind-ui__message {
    @apply px-2 my-2 text-neutral-400 font-semibold text-sm;
  }
  .pagefind-ui__results {
    @apply flex flex-col gap-3 max-h-full h-full md:max-h-[560px] overflow-y-auto;
  }
  .pagefind-ui__result-link {
    @apply text-cyan-600 underline;
  }
  .pagefind-ui__result-title {
    @apply text-xl font-semibold line-clamp-1;
  }
  .pagefind-ui__result-excerpt {
    @apply px-3 line-clamp-4 pt-1;
    mark {
      @apply dark:bg-cyan-800 bg-cyan-600 rounded-md px-1 text-neutral-200;
    }
  }
</style>
